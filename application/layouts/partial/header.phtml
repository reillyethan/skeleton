<?php
/** @var \Bluz\Layout\Layout $this */

use \Bluz\Proxy\Layout;
use \Bluz\Proxy\Messages;

?>
<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title><?=Layout::title()?></title>
    <base href="<?=$this->baseUrl()?>" />
    <link rel="profile" href="http://gmpg.org/xfn/11"/>
    <link rel="stylesheet" href="<?=$this->baseUrl('css/bootstrap.css')?>" />
    <link rel="stylesheet" href="<?=$this->baseUrl('css/font-awesome.css')?>" />
    <link rel="stylesheet" href="<?=$this->baseUrl('css/styles.css')?>" />
    <link rel="stylesheet" href="<?=$this->baseUrl('css/print.css')?>" media="print" />
    <link rel="icon" type="image/png" href="<?=$this->baseUrl('favicon.ico')?>" />

    <script src="<?=$this->baseUrl('js/require.js')?>"></script>
    <script src="<?=$this->baseUrl('js/config.js')?>"></script>

    <!-- For IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="<?=$this->baseUrl('/js/vendor/html5shiv.js')?>"></script>
    <script src="<?=$this->baseUrl('/js/vendor/html5shiv-printshiv.js')?>"></script>
    <![endif]-->

<?=Layout::headScript();?>
<?=Layout::headStyle();?>
<?=Layout::link();?>
<?=Layout::meta();?>
</head>
<body data-spy="scroll" data-bluz-module="<?=$this->module()?>" data-bluz-controller="<?=$this->controller()?>">
<?php if (Messages::count()):
    // JS not allow read headers of current request, only for XMLHTTPRequests :(
    ?>
    <script>
        require(['bluz.notify'], function(notify) {
            notify.set(<?=json_encode(Messages::popAll())?>);
        });
    </script>
<?php endif; ?>
